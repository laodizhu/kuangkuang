<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>kk</title>
</head>
<body>
    <div id="main" ondrop="event.preventDefault();imgC(event.dataTransfer);" ondragover="event.preventDefault();">
        <div id="mainBox">
            <img id="imgA" src="" alt="" />
            <canvas id="cv"></canvas>
            <div id="rectList"></div>
            <div id="rectListm"></div>
            <div id="rectListM"></div>
            <div id="op"></div>
            <div id="opm"></div>
            <div id="opM"></div>
            <div id="opColor"></div>
            <div id="MlineH"></div>
            <div id="MlineV"></div>
        </div>
    </div>
    <div id="bar">
        <a class="opr" title="Êü•ÁúãhtmlÂíåcss" onclick="seeCode()">&lt;/&gt;</a>
        <a class="opr" title="Êü•ÁúãhtmlÊó∂ËØÜÂà´ÊñáÂ≠ó" onclick="recognizeT(this)">T</a>
        <a class="opr" id="writeCss" title="ÁºñËæëcss" onclick="inCss(this)">üìù</a>
        <a class="opr" title="ÁºñËæëÁ±ªÂêç" onclick="inClass(this)">‚úèÔ∏è</a>
        <a class="opr" title="ÊµãÈáè" onclick="measure(this)" id="mBtn">üìè</a>
        <a class="opr" title="ÊµãÈáè2" onclick="measure2(this)" id="MBtn">üìê</a>
        <a class="opr" title="ÁÇπÂáª‰∏Ä‰∏™ÁÇπÂ§çÂà∂Ëøô‰∏™ÁÇπÁöÑÈ¢úËâ≤" onclick="inColor(this)" id="cBtn">üåà</a>
        <a class="opr" title="ÊµãÈáèËá™Âä®Â°´ÂÜôÊó∂ÊòØÂê¶Áî®pxÔºåÈªòËÆ§rem" onclick="px(this)">px</a>
        <input type="text" class="opr" id="pre" title="ËÆæÁΩÆÂâçÁºÄ" placeholder="$" value="" oninput="preC(this)" />
        <a class="btn active" v="<div class='$-'></div>" onclick="tagC(this)">div</a>
        <a class="btn" v="<a class='$-' title=''></a>" onclick="tagC(this)">a</a>
        <a class="btn" v="<img class='$-img' src='images/' alt='' />" onclick="tagC(this)">img</a>
        <a class="btn" v="<span class='$-'></span>" onclick="tagC(this)">span</a>
        <a class="btn" v="<ul class='$-ul'></ul>" onclick="tagC(this)">ul</a>
        <a class="btn" v="<li class='$-li'></li>" onclick="tagC(this)">li</a>
        <a class="btn" v="<p class=''></p>" onclick="tagC(this)">p</a>
        <a class="btn" v="<dl class='$-dl'></dl>" onclick="tagC(this)">dl</a>
        <a class="btn" v="<dt class='$-dt'></dt>" onclick="tagC(this)">dt</a>
        <a class="btn" v="<dd class='$-dd'></dd>" onclick="tagC(this)">dd</a>
        <a class="btn" v="<h1 class='$-h1'></h1>" onclick="tagC(this)">h1</a>
        <a class="btn" v="<h2 class='$-h2'></h2>" onclick="tagC(this)">h2</a>
        <a class="btn" v="<h3 class='$-h3'></h3>" onclick="tagC(this)">h3</a>
        <a class="btn" v="<table class='$-tb'></table>" onclick="tagC(this)">table</a>
        <a class="btn" v="<tr class='$-tr'></tr>" onclick="tagC(this)">tr</a>
        <a class="btn" v="<td class='$-td'></td>" onclick="tagC(this)">td</a>
        <a class="btn" v="<form class='$-form'></form>" onclick="tagC(this)">form</a>
        <a class="btn" v="<input class='$-txt' type='text' />" onclick="tagC(this)">text</a>
        <a class="btn" v="<input class='$-psd' type='password' />" onclick="tagC(this)">pass</a>
        <a class="btn" v="<input class='$-sub' type='submit' value='Êèê‰∫§' />" onclick="tagC(this)">submit</a>
        <a class="btn" v="<input class='$-rad' type='radio' value='' />" onclick="tagC(this)">radio</a>
        <a class="btn" v="<input class='$-ckb' type='checkbox' value='' />" onclick="tagC(this)">check</a>
        <a class="btn" v="<textarea class='$-area'></textarea>" onclick="tagC(this)">area</a>
    </div>
    
    <div id="result"></div>

    <div id="codePop">
        <div id="codeM" onclick="codePop.className=''"></div>
        <div id="codeBox">
            <textarea id="codeTextArea"></textarea>
            <a id="copyCode" onclick="copyCode()">Â§çÂà∂</a>
        </div>
        <div id="cssBox">
            <textarea id="cssTextArea"></textarea>
            <a id="copyCss" onclick="copyCss()">Â§çÂà∂</a>
        </div>
    </div>
    <div id="colorPop">
        <div id="colorM" onclick="colorPop.className=''"></div>
        <div id="colorCont">
            <div id="colorBox"></div>
            <div class="color-row"><a id="copy16" onclick="copy16()">Â§çÂà∂</a><textarea id="color16"></textarea></div>
            <div class="color-row"><a id="copyRGBA" onclick="copyRGBA()">Â§çÂà∂</a><textarea id="colorRGBA"></textarea></div>
        </div>
    </div>
    <div id="cssPop">
        <div id="cssM" onclick="cssPop.className=''"></div>
        <div class="css-box">
            <div class="css-left">
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">left</span><input class="css-t" type="text" id="left" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">margin-left</span><input class="css-t" type="text" id="margin-left" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">border-left</span><input class="css-t" type="text" id="border-left" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">padding-left</span><input class="css-t" type="text" id="padding-left" oninput="setCss()" /></div>
            </div>
            <div class="css-right">
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">right</span><input class="css-t" type="text" id="right" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">margin-right</span><input class="css-t" type="text" id="margin-right" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">border-right</span><input class="css-t" type="text" id="border-right" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">padding-right</span><input class="css-t" type="text" id="padding-right" oninput="setCss()" /></div>
            </div>
            <div class="css-top">
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">top</span><input class="css-t" type="text" id="top" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">margin-top</span><input class="css-t" type="text" id="margin-top" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">border-top</span><input class="css-t" type="text" id="border-top" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">padding-top</span><input class="css-t" type="text" id="padding-top" oninput="setCss()" /></div>
            </div>
            <div class="css-bottom">
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">padding-bottom</span><input class="css-t" type="text" id="padding-bottom" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">border-bottom</span><input class="css-t" type="text" id="border-bottom" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">margin-bottom</span><input class="css-t" type="text" id="margin-bottom" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">bottom</span><input class="css-t" type="text" id="bottom" oninput="setCss()" /></div>
            </div>
            <div class="css-center">
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">font-size</span><input class="css-t" type="text" id="font-size" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">color</span><input class="css-t" type="text" id="color" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">line-height</span><input class="css-t" type="text" id="line-height" oninput="setCss()" /></div>
                <div class="css-one">
                    <span class="css-dt">text-align</span>
                    <select class="css-t" id="text-align" onchange="setCss()">
                        <option value=""></option>
                        <option value="center">center</option>
                        <option value="right">right</option>
                        <option value="left">left</option>
                        <option value="justify">justify</option>
                    </select>
                </div>
                <div class="css-one">
                    <span class="css-dt">font-weight</span>
                    <select class="css-t" id="font-weight" onchange="setCss()">
                        <option value=""></option>
                        <option value="bold">bold</option>
                        <option value="normal">normal</option>
                        <option value="light">light</option>
                    </select>
                </div>
            </div>
            <div class="css-left-top">
                <div class="css-one">
                    <span class="css-dt">position</span>
                    <select class="css-t" id="position" onchange="setCss()">
                        <option value=""></option>
                        <option value="absolute">absolute</option>
                        <option value="relative">relative</option>
                        <option value="fixed">fixed</option>
                        <option value="static">static</option>
                    </select>
                </div>
                <div class="css-one"><span class="css-dt">z-index</span><input class="css-t" type="text" id="z-index" oninput="setCss()" /></div>
                <div class="css-one">
                    <span class="css-dt">display</span>
                    <select class="css-t" id="display" onchange="setCss()">
                        <option value=""></option>
                        <option value="inline-block">inline-block</option>
                        <option value="flex">flex</option>
                        <option value="block">block</option>
                        <option value="none">none</option>
                        <option value="inline">inline</option>
                    </select>
                </div>
                <div class="css-one">
                    <span class="css-dt">vertical-align</span>
                    <select class="css-t" id="vertical-align" onchange="setCss()">
                        <option value=""></option>
                        <option value="top">top</option>
                        <option value="middle">middle</option>
                        <option value="bottom">bottom</option>
                    </select>
                </div>
                <div class="css-one">
                    <span class="css-dt">float</span>
                    <select class="css-t" id="float" onchange="setCss()">
                        <option value=""></option>
                        <option value="left">left</option>
                        <option value="right">right</option>
                        <option value="none">none</option>
                    </select>
                </div>
                <div class="css-one">
                    <span class="css-dt">overflow</span>
                    <select class="css-t" id="overflow" onchange="setCss()">
                        <option value=""></option>
                        <option value="hidden">hidden</option>
                        <option value="visible">visible</option>
                        <option value="auto">auto</option>
                        <option value="scroll">scroll</option>
                    </select>
                </div>
            </div>
            <div class="css-right-top">
                <div class="css-one"><span class="css-dt">transition</span><input class="css-t" type="text" id="transition" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt">transform</span><input class="css-t" type="text" id="transform" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt">opacity</span><input class="css-t" type="text" id="opacity" oninput="setCss()" /></div>
                <div class="css-one">
                    <span class="css-dt">visibility</span>
                    <select class="css-t" id="visibility" onchange="setCss()">
                        <option value=""></option>
                        <option value="hidden">hidden</option>
                        <option value="visible">visible</option>
                    </select>
                </div>
                <div class="css-one">
                    <span class="css-dt">cursor</span>
                    <select class="css-t" id="cursor" onchange="setCss()">
                        <option value=""></option>
                        <option value="pointer">pointer</option>
                        <option value="default">default</option>
                        <option value="text">text</option>
                        <option value="crosshair">crosshair</option>
                    </select>
                </div>
            </div>
            <div class="css-left-bottom">
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">width</span><input class="css-t" type="text" id="width" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">height</span><input class="css-t" type="text" id="height" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">border-radius</span><input class="css-t" type="text" id="border-radius" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">padding</span><input class="css-t" type="text" id="padding" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">border</span><input class="css-t" type="text" id="border" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt sp" onclick="distanceP(this)">margin</span><input class="css-t" type="text" id="margin" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt">box-shadow</span><input class="css-t" type="text" id="box-shadow" oninput="setCss()" /></div>
            </div>
            <div class="css-right-bottom">
                <div class="css-one"><span class="css-dt sp" onclick="colorP(this)">background-color</span><input class="css-t" type="text" id="background-color" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt">background-image</span><input class="css-t" type="text" id="background-image" oninput="setCss()" /></div>
                <div class="css-one"><span class="css-dt">background-size</span><input class="css-t" type="text" id="background-size" oninput="setCss()" /></div>
                <div class="css-one">
                    <span class="css-dt">background-position</span>
                    <select class="css-t" id="background-position" onchange="setCss()">
                        <option value=""></option>
                        <option value="top left">top left</option>
                        <option value="top center">top center</option>
                        <option value="top right">top right</option>
                        <option value="center left">center left</option>
                        <option value="center center">center center</option>
                        <option value="center right">center right</option>
                        <option value="bottom left">bottom left</option>
                        <option value="bottom center">bottom center</option>
                        <option value="bottom right">bottom right</option>
                    </select>
                </div>
                <div class="css-one">
                    <span class="css-dt">background-repeat</span>
                    <select class="css-t" id="background-repeat" onchange="setCss()">
                        <option value=""></option>
                        <option value="no-repeat">no-repeat</option>
                        <option value="repeat-x">repeat-x</option>
                        <option value="repeat-y">repeat-y</option>
                        <option value="repeat">repeat</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
<style>
    @charset "utf-8";
    html{-webkit-font-smoothing:antialiased;height: 100%;touch-action: manipulation;}
    blockquote,body,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}
    header, hgroup, nav, menu, main, section, article, summary, details, aside, figure, figcaption, footer{display: block;margin:0;padding:0}
    table{border-collapse:collapse;border-spacing:0}
    table,th,td{border: 1px solid black;}
    fieldset,img{border:0}
    address,caption,cite,code,dfn,em,var{font-style:normal;font-weight:400;}
    dl,ol,ul{list-style-type:none}
    h1,h2,h3,h4,h5,h6{font-size:100%;}
    a{text-decoration:none;color: inherit;}
    a:hover{text-decoration:none;-webkit-tap-highlight-color:rgba(255,0,0,0);outline:0;outline:none;blr:expression(this.onFocus=this.blur())}
    sup{vertical-align:text-top}
    sub{vertical-align:text-bottom}
    textarea{resize:none;outline: none;font-family: Microsoft Yahei;}
    img{vertical-align:middle;max-width: 100%;height: auto;}
    button,input[type=submit],input[type=text],input[type=button]{-webkit-appearance:none;-webkit-tap-highlight-color:rgba(255,0,0,0);outline:0;blr:expression(this.onFocus=this.blur())}
    input{outline: 0;}
    input::-webkit-input-safebox-button{display: none;}
    body{color: rgba(255,0,0,0.8);font-family: Microsoft Yahei;background-color: #000;}
    body *{box-sizing: border-box;line-height: 1;}

    #result{display: none;}

    #cv{position: relative;z-index: 1;}
    #rectList,
    #rectListm,
    #rectListM{width: 100%;height: 100%;position: absolute;left: 0;top: 0;user-select: none;}
    #rectList{z-index: 8;}
    #rectList.show{z-index: 12345;}
    #rectListm{z-index: 1;}
    #rectListM{z-index: 1;}
    #op{width: 100%;height: 100%;position: absolute;left: 0;top: 0;z-index: 10;cursor: crosshair;user-select: none;}
    #opm,
    #opM,
    #opColor{display: none;width: 100%;height: 100%;position: absolute;left: 0;top: 0;z-index: 100;cursor: crosshair;user-select: none;}
    #opM{cursor: default;}
    #opm.show,
    #opM.show,
    #opColor.show{display: block;}
    #bar{display: flex;width: 100%;position: fixed;left: 0;top: 0;background-color: #222;z-index: 10;font-size: 0;}
    #main{width: 100%;height: 100vh;position: fixed;left: 0;top: 0;font-size: 0;overflow: auto;}
    #mainBox{width: auto;position: relative;display: inline-block;vertical-align: top;}
    #imgA{max-width: none;opacity: 0;position: absolute;left: 0;top: 0;z-index: 0;}
    .btn,
    .opr{flex: 1;line-height: 50px;padding: 0 .2em;font-size: 1vw;color: #ddd;font-weight: lighter;text-align: center;cursor: pointer;user-select: none;white-space: nowrap;transition: all .3s;display: inline-block;}
    .btn:hover,
    .opr:hover,
    .opr.active,
    .btn.active,
    .opr.selected{background-color: #555;color: #eee;}
    input.opr{width: auto;min-width: 0;background-color: transparent;border: none;}
    .one{position: absolute;box-sizing: border-box;border: 1px solid rgba(255,0,0,0.8);user-modify: read-write;-webkit-user-modify: read-write;font-size: 14px;color: rgba(255,0,0,0.8);cursor: text;line-height: 18px;padding: 1px 3px;outline: none;}
    .one .w,
    .one .h{display: none;font-size: 12px;color: #fff;line-height: 14px;background-color: rgba(255,0,0,0.8);padding: 0 2px;position: absolute;}
    .one .w{left: 50%;top: 0;transform: translate(-50%,0);}
    .one .h{left: 0;top: 50%;transform: translate(0,-50%);}
    .one-m{position: absolute;box-sizing: border-box;}
    .one-m .w,
    .one-m .h{font-size: 12px;color: #fff;line-height: 14px;background-color: rgba(255,0,0,0.8);padding: 0 2px;position: absolute;}
    .one-m .w{left: 50%;top: 0;transform: translate(-50%,0);}
    .one-m .h{left: 0;top: 50%;transform: translate(0,-50%);}
    .one-m.ve{background-color: transparent;border-left: 1px solid rgba(255,0,0,0.8);transition: height .3s;}
    .one-m.ho{background-color: transparent;border-top: 1px solid rgba(255,0,0,0.8);transition: width .3s;}
    .one-m.ve:before,
    .one-m.ve:after{content: "";display: block;width: 7px;height: 1px;background-color: rgba(255,0,0,0.8);position: absolute;left: -4px;top: 0;}
    .one-m.ve:after{top: auto;bottom: 0;}
    .one-m.ho:before,
    .one-m.ho:after{content: "";display: block;width: 1px;height: 7px;background-color: rgba(255,0,0,0.8);position: absolute;left: 0;top: -4px;}
    .one-m.ho:after{left: auto;right: 0;}
    .one-m.bt{border-top: 1px solid rgba(255,0,0,0.8);}
    .one-m.bl{border-left: 1px solid rgba(255,0,0,0.8);}

    .one-M{position: absolute;box-sizing: border-box;}
    .one-M .w,
    .one-M .h{font-size: 12px;color: #fff;line-height: 14px;background-color: rgba(255,0,0,0.8);padding: 0 2px;position: absolute;}
    .one-M .w{left: 50%;top: 0;transform: translate(-50%,0);}
    .one-M .h{left: 0;top: 50%;transform: translate(0,-50%);}
    .one-M.bt{border-top: 1px solid rgba(255,0,0,0.8);}
    .one-M.bt .h{display: none;}
    .one-M.bt:before,
    .one-M.bt:after{content: "";display: block;width: 1px;height: 19px;background-color: rgba(255,0,0,0.8);position: absolute;left: 0;top: -10px;}
    .one-M.bt:after{left: auto;right: 0;}
    .one-M.bl{border-left: 1px solid rgba(255,0,0,0.8);}
    .one-M.bl .w{display: none;}
    .one-M.bl:before,
    .one-M.bl:after{content: "";display: block;width: 19px;height: 1px;background-color: rgba(255,0,0,0.8);position: absolute;left: -10px;top: 0;}
    .one-M.bl:after{top: auto;bottom: 0;}

    #MlineH{width: 100%;border-top: 1px dashed rgba(255,0,0,0.8);position: absolute;left: 0;pointer-events: none;z-index: 1;display: none;}
    #MlineV{height: 100%;border-left: 1px dashed rgba(255,0,0,0.8);position: absolute;top: 0;pointer-events: none;z-index: 1;display: none;}
    #MlineH.show{display: block;}
    #MlineV.show{display: block;}

    #cssPop{width: 100%;height: calc(100vh - 50px);position: fixed;left: 0;top: 50px;z-index: 1234567;transition: opacity .3s;left: -200%;opacity: 0;}
    #cssPop.show{opacity: 1;left: 0;}
    #cssM{width: 100%;height: 100%;position: absolute;left: 0;top: 0;background-color: rgba(0,0,0,0.3);z-index: 1;cursor: pointer;}
    .css-box{width: 1100px;height: 800px;margin-left: -550px;margin-top: -400px;background-color: #222;position: absolute;left: 50%;top: 50%;padding: 10px;z-index: 10;}
    .css-one{font-size: 16px;color: #ddd;}
    .css-one.black{background-color: #111;}
    .css-one.black .css-t{background-color: #111;}
    .css-dt{display: inline-block;vertical-align: top;line-height: 42px;padding-left: 10px;padding-right: 10px;transition: all .3s;}
    .css-dt.sp{cursor: pointer;}
    .css-dt.sp:hover{background-color: #000;cursor: pointer;}
    .css-t{width: 200px;height: 42px;border: none;background-color: #222;font-size: 16px;color: #ddd;padding: 0 5px;outline: none;transition: all .3s;}
    .css-t:hover{background-color: #000;}
    .css-left{position: absolute;left: 0;top: 50%;transform: translate(0,-50%);text-align: left;}
    .css-right{position: absolute;right: 0;top: 50%;transform: translate(0,-50%);text-align: left;}
    .css-top{position: absolute;left: 50%;top: 0;transform: translate(-50%,0);text-align: left;}
    .css-bottom{position: absolute;left: 50%;bottom: 0;transform: translate(-50%,0);text-align: left;}
    .css-center{position: absolute;left: 50%;top: 50%;transform: translate(-50%,-50%);text-align: left;}
    .css-left-top{position: absolute;left: 0;top: 0;text-align: left;}
    .css-right-top{position: absolute;right: 0;top: 0;text-align: left;}
    .css-left-bottom{position: absolute;left: 0;bottom: 0;text-align: left;}
    .css-right-bottom{position: absolute;right: 0;bottom: 0;text-align: left;}

    .css-left,
    .css-left .css-t,
    .css-right,
    .css-right .css-t,
    .css-top,
    .css-top .css-t,
    .css-bottom,
    .css-bottom .css-t{background-color: #333;}
    .css-box .css-t:hover{background-color: #000;}
    .css-box .css-dt.sp:hover{background-color: #000;}

    #codePop{width: 100%;height: calc(100vh - 50px);position: fixed;left: 0;top: 50px;z-index: 987654321;left: -200%;opacity: 0;}
    #codePop.show{opacity: 1;left: 0;}
    #codeM{width: 100%;height: 100%;position: absolute;left: 0;top: 0;background-color: rgba(0,0,0,0.3);z-index: 1;cursor: pointer;}
    #codeBox{width: 39%;height: 760px;position: absolute;left: 10%;top: 50%;margin-top: -380px;z-index: 2;}
    #codeTextArea{width: 100%;height: 100%;position: absolute;left: 0;top: 0;border: none;background-color: #222;font-size: 1vw;color: #ddd;line-height: 1.5;padding: 70px 2em;outline: none;}
    #copyCode{width: 200px;height: 50px;line-height: 50px;text-align: center;background-color: #111;color: #ddd;position: absolute;left: 0;top: 0;z-index: 10;cursor: pointer;transition: all .3s;}
    #cssBox{width: 39%;height: 760px;position: absolute;right: 10%;top: 50%;margin-top: -380px;z-index: 2;}
    #cssTextArea{width: 100%;height: 100%;position: absolute;left: 0;top: 0;border: none;background-color: #222;font-size: 1vw;color: #ddd;line-height: 1.5;padding: 70px 2em;outline: none;}
    #copyCss{width: 200px;height: 50px;line-height: 50px;text-align: center;background-color: #111;color: #ddd;position: absolute;left: 0;top: 0;z-index: 10;cursor: pointer;transition: all .3s;}
    #copyCss:hover,
    #copyCode:hover{background-color: #000;}
    #colorPop{width: 100%;height: calc(100vh - 50px);position: fixed;left: 0;top: 50px;z-index: 1234567;left: -200%;opacity: 0;}
    #colorPop.show{opacity: 1;left: 0;}
    #colorM{width: 100%;height: 100%;position: absolute;left: 0;top: 0;background-color: rgba(0,0,0,0.3);z-index: 1;cursor: pointer;}
    #colorCont{width: 1100px;height: 760px;position: absolute;left: 50%;top: 50%;margin-left: -550px;margin-top: -380px;z-index: 2;border: none;background-color: #222;padding: 30px;}
    #colorBox{width: 100px;height: 100px;border: 6px solid #ddd;margin-bottom: 30px;}
    .color-row{width: 100%;display: flex;}
    #color16,
    #colorRGBA{flex: 1;height: 50px;line-height: 50px;font-size: 1vw;color: #ddd;outline: none;background-color: #222;border: none;padding: 0 20px;margin-bottom: 30px;}
    #copy16,
    #copyRGBA{width: 100px;height: 50px;line-height: 50px;text-align: center;background-color: #111;color: #ddd;cursor: pointer;}
</style>
<script>
    //Ëé∑ÂèñdomÂØπË±°
    const f = id=>{
        return document.getElementById(id)
    }
    //ËØÜÂà´ÊñáÂ≠óÁöÑÊñáÊ°£ÁΩëÂùÄÔºöhttps://cloud.baidu.com/product/ocr/general
    const token = '24.ccd63383ff2462f7873db59032464f62.2592000.1626257740.282335-23477754'
    const url = 'https://aip.baidubce.com/rest/2.0/ocr/v1/general_basic?access_token=' + token
    const cv = f('cv')
    const ctx = cv.getContext('2d')
    const main = f('main')
    const result = f('result')
    const imgA = f('imgA')
    const bar = f('bar')
    const cBtn = f('cBtn')
    const mBtn = f('mBtn')
    const writeCss = f('writeCss')
    const rectList = f('rectList')
    const rectListm = f('rectListm')
    const rectListM = f('rectListM')
    const op = f('op')
    const opm = f('opm')
    const opM = f('opM')
    const opColor = f('opColor')
    const cssObj = {
        'background-image': 'url(../images/)',
        'transform': 'translate()',
        'color': '#',
        'background-color': '#',
        'border-top': '1px solid #',
        'border-right': '1px solid #',
        'border-bottom': '1px solid #',
        'border-left': '1px solid #',
        'border': '1px solid #',
        'margin': '0 autoo',
        'box-shadow': '0 0 0rem rgba(0,0,0,0)',
        'width': '100%%',
        'border-radius': '50%%',
        'transition': 'all .3ss',
        'background-size': 'coverr',
        'line-height': '1.',
        'opacity': '0.'
    }
    const cssObjV = Object.values(cssObj)
    const cssPop = f('cssPop')
    const codePop = f('codePop')
    const codeTextArea = f('codeTextArea')
    const cssTextArea = f('cssTextArea')
    const color16 = f('color16')
    const colorRGBA = f('colorRGBA')
    const colorPop = f('colorPop')
    const MlineH = f('MlineH')
    const MlineV = f('MlineV')
    let maxLevel = 0
    let lowestArr = []
    let curTag = bar.querySelector('.btn.active').innerText
    let preV = f('pre').value
    let curV = bar.querySelector('.btn.active').getAttribute('v').replace(preV?'$':'$-',preV)
    let bool = false,x0, y0, x1, y1, curL, curT, curW, curH, opWidth, opHeight,curEle = null
    let boolm = false,xm0, ym0, xm1, ym1, curmL, curmT, curmW, curmH, opmWidth, opmHeight,curmEle = null
    let boolM = false,xM0, yM0, xM1, yM1, curML, curMT, curMW, curMH, opMWidth, opMHeight,curMEle = null
    let boolColor = false
    let opMshow = false
    let d = []
    let copyD = ''
    let cIndex = 0
    let backArr = []
    let wdW = 0
    let wdH = 0
    let leftS,rightS,topS,bottomS
    let recognize = false
    let distancePut = false
    let colorPut = false
    let drawAttr = ''
    let drawPx = false
    let tagS = true
    let dIndex = undefined
    //ÁîªÊ°ÜÊ°Ü
    op.onmousedown = e=>{
        if(!bool){
            bool = true
            let opR = op.getBoundingClientRect()
            opWidth = parseInt(opR.width)
            opHeight = parseInt(opR.height)
            x0 = e.offsetX
            y0 = e.offsetY
            x1 = e.offsetX
            y1 = e.offsetY
            curEle = document.createElement("div")
            curEle.className = 'one'
            curEle.onclick= function(){editCss(this)}
            rectList.appendChild(curEle)
            setEle(x0, y0, x1, y1)
            setWH()
        }else{
        	bool = false
            if (Math.abs(x1 - x0) < 2 || Math.abs(y1 - y0) < 2) {
                rectList.removeChild(curEle)
                curEle = null
            } else {
                d.push([curL, curT, curL + curW, curT + curH, curTag, curV, d.length])
                copyD = JSON.stringify(d)
                curEle.innerText=curV.match(/class='(.*?)'/)[1]
                backArr = []
            }
            stopScroll()
        }
        
    }
    //ÁîªÁ∫ø
    opm.onmousedown = e=>{
        let r = opm.getBoundingClientRect()
        opmWidth = parseInt(r.width)
        opmHeight = parseInt(r.height)
        boolm = true
        xm0 = e.offsetX
        ym0 = e.offsetY
        xm1 = e.offsetX
        ym1 = e.offsetY
        curmEle = document.createElement("div")
        curmEle.className = 'one-m'
        curmEle.innerHTML = "<div class='w'></div><div class='h'></div>"
        rectListm.appendChild(curmEle)
        setmEle(xm0, ym0, xm1, ym1)
        setWH()
    }
    //ÁîªÁ∫ø2
    opM.onmousedown = e=>{
    	if (!boolM) {
    		boolM = true
            let r = opM.getBoundingClientRect()
            opMWidth = parseInt(r.width)
            opMHeight = parseInt(r.height)
            xM0 = e.offsetX-1
            yM0 = e.offsetY-1
            xM1 = e.offsetX
            yM1 = e.offsetY
            curMEle = document.createElement("div")
            curMEle.className = 'one-M'
            curMEle.innerHTML = "<div class='w'></div><div class='h'></div>"
            rectListM.appendChild(curMEle)
            setMEle(xM0, yM0, xM1, yM1)
            setWH()
        }else{
        	boolM = false
            if(curMW>curMH){
                yM1 = yM0+1
                setCssD(curMW)
            }else{
                xM1 = xM0+1
                setCssD(curMH)
            }
            setMEle(xM0, yM0, xM1, yM1)
            stopScroll()
        }
    }
    //ÂèñÈ¢úËâ≤
    opColor.onmousedown = e=>{
        boolColor = true
    }
    document.onmousemove = e=>{
        if (bool) {
            x1 = e.pageX + main.scrollLeft
            y1 = e.pageY + main.scrollTop
            x1 = x1 > opWidth ? opWidth : x1
            y1 = y1 > opHeight ? opHeight : y1
            x1 = x1 < 0 ? 0 : x1
            y1 = y1 < 0 ? 0 : y1
            setEle(x0, y0, x1, y1)
            scrollXY(e.pageX,e.pageY)
            MlineH.style.top=e.pageY + main.scrollTop-1+'px'
            MlineV.style.left=e.pageX + main.scrollLeft-1+'px'
        }
        if (boolm) {
            xm1 = e.pageX + main.scrollLeft
            ym1 = e.pageY + main.scrollTop
            xm1 = xm1 > opmWidth ? opmWidth : xm1
            ym1 = ym1 > opmHeight ? opmHeight : ym1
            xm1 = xm1 < 0 ? 0 : xm1
            ym1 = ym1 < 0 ? 0 : ym1
            setmEle(xm0, ym0, xm1, ym1)
            scrollXY(e.pageX,e.pageY)
        }
        if (opMshow) {
            MlineH.style.top=e.pageY + main.scrollTop-1+'px'
            MlineV.style.left=e.pageX + main.scrollLeft-1+'px'
        }
        if(boolM){
            xM1 = e.pageX + main.scrollLeft
            yM1 = e.pageY + main.scrollTop
            xM1 = xM1 > opMWidth ? opMWidth : xM1
            yM1 = yM1 > opMHeight ? opMHeight : yM1
            xM1 = xM1 < 0 ? 0 : xM1
            yM1 = yM1 < 0 ? 0 : yM1
            setMEle(xM0, yM0, xM1, yM1)
            scrollXY(e.pageX,e.pageY)
        }
    }
    document.onmouseup = e=>{
        if (boolm) {
            boolm = false
            if(curmW>curmH){
                ym1 = ym0+1
            }else{
                xm1 = xm0+1
            }
            setmEle(xm0, ym0, xm1, ym1)
            stopScroll()
            expand()
        }
        if(boolColor){
            boolColor = false
            let cc = ctx.getImageData(e.pageX+main.scrollLeft,e.pageY+main.scrollTop, 1, 1).data
            let c16 = parse16(cc)
            let rgba = 'rgba('+cc[0]+','+cc[1]+','+cc[2]+','+parseInt(cc[3]*100/255)/100+')'
            if(!colorPut){
                colorPop.className = 'show'
                f('colorBox').style.backgroundColor=rgba
                colorRGBA.value = rgba
                color16.value = c16
                copy16()
            }else{
                setCssC(c16)
            }
        }
    }

    //Ëé∑ÂèñÊ≠§Êó∂Â±èÂπïÂÆΩÈ´ò
    const setWH = ()=>{
        wdW = main.getBoundingClientRect().width
        wdH = main.getBoundingClientRect().height
    }

    //ËÆæÁΩÆÊ°ÜÊ°ÜÁöÑ‰ΩçÁΩÆÂíåÂ§ßÂ∞è
    const setEle = (x0, y0, x1, y1)=>{
        curL = x0
        curT = y0
        curW = Math.abs(x1 - x0)
        curH = Math.abs(y1 - y0)
        if (x1 < x0) {
            curL = x1
        }
        if (y1 < y0) {
            curT = y1
        }
        curEle.style.left = curL+'px'
        curEle.style.top = curT+'px'
        curEle.style.width = curW+'px'
        curEle.style.height = curH+'px'
    }

    //ËÆæÁΩÆÁ∫øÁöÑ‰ΩçÁΩÆÂíåÂ§ßÂ∞è
    const setmEle = (x0, y0, x1, y1)=>{
        curmL = x0
        curmT = y0
        curmW = Math.abs(x1 - x0)
        curmH = Math.abs(y1 - y0)
        if (x1 < x0) {
            curmL = x1
        }
        if (y1 < y0) {
            curmT = y1
        }
        curmEle.className = curmW>curmH?'one-m bt':'one-m bl'
        curmEle.style.left = curmL+'px'
        curmEle.style.top = curmT+'px'
        curmEle.style.width = curmW+'px'
        curmEle.style.height = curmH+'px'
    }

    //ËÆæÁΩÆÁ∫øÁöÑ‰ΩçÁΩÆÂíåÂ§ßÂ∞è2
    const setMEle = (x0, y0, x1, y1)=>{
        curML = x0
        curMT = y0
        curMW = Math.abs(x1 - x0)
        curMH = Math.abs(y1 - y0)
        if (x1 < x0) {
            curML = x1
        }
        if (y1 < y0) {
            curMT = y1
        }
        curMEle.className = curMW>curMH?'one-M bt':'one-M bl'
        curMEle.style.left = curML+'px'
        curMEle.style.top = curMT+'px'
        curMEle.style.width = curMW+'px'
        curMEle.style.height = curMH+'px'
        curMEle.querySelector('.w').innerText=curMW
        curMEle.querySelector('.h').innerText=curMH
    }

    //Èº†Ê†áÊãñÂà∞ËæπÁºòÊó∂ÊªöÂä®Êù°Ëá™Âä®Êªö
    const scrollXY = (x,y)=>{
        if(x>wdW-20){
            if(!rightS){
                rightS = setInterval(()=>{
                    main.scrollLeft = main.scrollLeft + 20
                },20)
            }
        }else{
            clearInterval(rightS)
            rightS = null
        }
        if(y>wdH-20){
            if(!bottomS){
                bottomS = setInterval(()=>{
                    main.scrollTop = main.scrollTop + 20
                },20)
            }
        }else{
            clearInterval(bottomS)
            bottomS = null
        }
        if(x<1){
            if(!leftS){
                leftS = setInterval(()=>{
                    main.scrollLeft = main.scrollLeft - 20
                },20)
            }
        }else{
            clearInterval(leftS)
            leftS = null
        }
        if(y<1){
            if(!topS){
                topS = setInterval(()=>{
                    main.scrollTop = main.scrollTop - 20
                },20)
            }
        }else{
            clearInterval(topS)
            topS = null
        }
    }

    //ÂÅúÊ≠¢Ëá™Âä®Êªö
    const stopScroll = ()=>{
        clearInterval(rightS)
        rightS = null
        clearInterval(bottomS)
        bottomS = null
        clearInterval(leftS)
        leftS = null
        clearInterval(topS)
        topS = null
    }

    //Êåâ‰ªéÂ∑¶Âà∞Âè≥‰ªé‰∏äÂà∞‰∏ãÊéíÂ•ΩÈ°∫Â∫è
    const sortD = ()=>{
        d.sort((a, b)=>{
            if (a[0] < b[0] && a[1] <= b[3]) {
                return -1
            } else if (a[0] < b[0] && a[1] > b[3]) {
                return 1
            } else if (a[0] == b[0] && a[1] <= b[1]) {
                return -1
            } else if (a[0] == b[0] && a[1] > b[1]) {
                return 1
            } else if (a[0] > b[0] && a[3] <= b[1]) {
                return -1
            } else if (a[0] > b[0] && a[3] > b[1]) {
                return 1
            }
        })
    }

    //ÊâæÂá∫d‰∏≠ÊØè‰∏™ÂÖÉÁ¥†ÁöÑÊâÄÊúâÁà∂ËäÇÁÇπ
    const setParents = ()=>{
        for (let i = 0; i < d.length; i++) {
            let temp = []
            for (let j = 0; j < d.length; j++) {
                if (d[i][0] > d[j][0] && d[i][1] > d[j][1] && d[i][2] < d[j][2] && d[i][3] < d[j][3]) {
                    temp.push(j)
                }
            }
            temp.sort((a, b) =>{
                return d[a][0] - d[b][0]
            })
            d[i][7] = temp
        }
    }

    //Ëé∑Âèñd‰∏≠ÁöÑÊúÄÊ∑±Â±ÇÊï∞
    const setMaxLevel = ()=>{
        MaxLevel = 0
        for (let i = 0; i < d.length; i++) {
            if (d[i][7].length + 1 > maxLevel) {
                maxLevel = d[i][7].length + 1
            }
        }
    }

    //Ëé∑Âèñd‰∏≠ÊâÄÊúâÊúÄÈáåÂ±ÇÁöÑÂÖÉÁ¥†Âú®Êï∞ÁªÑd‰∏≠ÁöÑ‰ΩçÁΩÆ
    const setLowestArr = ()=>{
        lowestArr = []
        for (let i = 0; i < d.length; i++) {
            let tf = true
            for (let j = 0; j < d.length; j++) {
                if (d[j][7].indexOf(i) != -1) {
                    tf = false
                    break
                }
            }
            if (tf) {
                lowestArr.push(i)
            }
        }
    }

    //ÂàõÂª∫htmlÁªìÊûÑ
    const createHtml = ()=>{
        result.innerHTML = ''
        for (let i = 0; i < d.length; i++) {
            if (d[i][7].length == 0) {
                let p = document.createElement("div")
                p.innerHTML = d[i][5]
                let h = p.children[0]
                h.id='a' + i
                if(d[i][8]){
                    h.setAttribute('cssT',obj2css(d[i][8]))
                }else{
                    h.setAttribute('cssT','')
                }
                result.appendChild(h)
            }
        }
        for (let k = 1; k < maxLevel; k++) {
            for (let i = 0; i < d.length; i++) {
                if (d[i][7].length == k) {
                    let p = document.createElement("div")
                    p.innerHTML = d[i][5]
                    let h = p.children[0]
                    h.id='a' + i
                    if(d[i][8]){
                        h.setAttribute('cssT',obj2css(d[i][8]))
                    }else{
                        h.setAttribute('cssT','')
                    }
                    f('a' + d[i][7][k - 1]).appendChild(h)
                }
            }
        }
    }

    //Ëé∑ÂèñÊâÄÊúâÁ±ªÂêçÂä†Ê†∑ÂºèÊîæÂà∞textareaÈáå
    const getAllClass = ()=>{
        let all = result.querySelectorAll('*')
        let ob = {}
        for(let i=0;i<all.length;i++){
            let item = all[i]
            let name = item.className
            if(name){
                let c = name.split(' ')[0]
                let s = item.getAttribute('cssT')
                if(ob[c]){
                    ob[c] += s
                }else{
                    ob[c] = s
                }
            }
        }
        let ray = []
        for(let key  in ob){
            let arr = ob[key].split(';')
            arr = Array.from(new Set(arr))
            ray.push('.'+key+'{'+arr.join(';')+'}')
        }
        cssTextArea.value = ray.join('\n')
    }

    //Êâ©
    const expand = ()=>{
        const jg = 15
        const jd = 10
        if(curmW>curmH){
            let dt = ctx.getImageData(curmL, curmT, curmW, 1).data
            if(maxDc(dt)<jg){
                for(let j=1;j<10000;j++){
                    let dt2 = ctx.getImageData(curmL, curmT+j, curmW, 1).data
                    if(avgDc(dt,dt2)>jd){
                        ym1 = ym0+j
                        break
                    }
                }
                for(let j=1;j<10000;j++){
                    let dt2 = ctx.getImageData(curmL, curmT-j, curmW, 1).data
                    if(avgDc(dt,dt2)>jd){
                        ym0 = ym0-j+1
                        break
                    }
                }
            }else{
                for(let k=1;k<10000;k++){
                    let dt = ctx.getImageData(curmL, curmT+k, curmW, 1).data
                    if(maxDc(dt)<jg){
                        ym1 = ym0+k
                        break
                    }
                }
                for(let k=1;k<10000;k++){
                    let dt = ctx.getImageData(curmL, curmT-k, curmW, 1).data
                    if(maxDc(dt)<jg){
                        ym0 = ym0-k+1
                        break
                    }
                }
            }
            setmEle(xm0, ym0, xm1, ym1)
            curmEle.className = 'one-m ve'
            curmEle.querySelector('.h').innerText=curmH
            setCssD(curmH)
        }else{
            let dt = ctx.getImageData(curmL, curmT, 1, curmH).data
            if(maxDc(dt)<jg){
                for(let j=1;j<10000;j++){
                    let dt2 = ctx.getImageData(curmL+j, curmT, 1, curmH).data
                    if(avgDc(dt,dt2)>jd){
                        xm1 = xm0+j
                        break
                    }
                }
                for(let j=1;j<10000;j++){
                    let dt2 = ctx.getImageData(curmL-j, curmT, 1, curmH).data
                    if(avgDc(dt,dt2)>jd){
                        xm0 = xm0-j+1
                        break
                    }
                }
            }else{
                for(let k=1;k<10000;k++){
                    let dt = ctx.getImageData(curmL+k, curmT, 1, curmH).data
                    if(maxDc(dt)<jg){
                        xm1 = xm0+k
                        break
                    }
                }
                for(let k=1;k<10000;k++){
                    let dt = ctx.getImageData(curmL-k, curmT, 1, curmH).data
                    if(maxDc(dt)<jg){
                        xm0 = xm0-k+1
                        break
                    }
                }
            }
            setmEle(xm0, ym0, xm1, ym1)
            curmEle.className = 'one-m ho'
            curmEle.querySelector('.w').innerText=curmW
            setCssD(curmW)
        }
    }

    //ÂùóÁä∂ËØÜÂà´
    const bkr = ()=>{
        
    }

    //Áªô‰∏Ä‰∏™imageDataÔºåÊâæÂá∫Ëøô‰∏™data‰∏≠È¢úËâ≤Â∑ÆÂà´ÊúÄÂ§ß‰∏§ÁßçÈ¢úËâ≤‰πãÂ∑Æ
    const maxDc = dt=>{
        let n = dt.length,ccmax = 0
        for(let i=0;i<n;i+=4){
            for(let j=i+4;j<n;j+=4){
                let cb = Math.abs(dt[j]-dt[i]) + Math.abs(dt[j+1]-dt[i+1]) + Math.abs(dt[j+2]-dt[i+2])
                if(cb>ccmax){ccmax = cb}
            }
        }
        return ccmax
    }

    //Áªô‰∏§‰∏™ÈïøÂ∫¶‰∏ÄÊ†∑ÁöÑimageDataÔºåÊ±ÇÂÆÉ‰ª¨ÁöÑÂπ≥ÂùáÈ¢úËâ≤Â∑Æ
    const avgDc = (dt,dt2)=>{
        let n=dt.length,ddd = 0,ddn = 0
        for(let i=0;i<n;i+=4){
            let dc = Math.abs(dt[i]-dt2[i]) + Math.abs(dt[i+1]-dt2[i+1]) + Math.abs(dt[i+2]-dt2[i+2])
            if(dc>0){
                ddd += dc
                ddn++
            }
        }
        if(ddn>0){
            return ddd/ddn
        }else{
            return 0
        }
    }

    //ÊñáÂ≠óËØÜÂà´
    const getText = ()=>{
        if(!lowestArr.length){
            return
        }
        let item = d[lowestArr[cIndex]]
        if (['img', 'radio', 'checkbox', 'video'].indexOf(item[4]) != -1) {
            nextText()
            return
        }
        let t = ctx.getImageData(item[0], item[1], item[2] - item[0], item[3] - item[1])
        let c = document.createElement('canvas')
        c.width = t.width < 15 ? 15 : t.width
        c.height = t.height < 15 ? 15 : t.height
        c.getContext('2d').putImageData(t, 0, 0)
        let src = c.toDataURL('image/jpeg')
        let tempBase64 = src.replace(/^data:image\/\w+;base64,/, '')
        let xhr = new XMLHttpRequest()
        xhr.open("POST", url, true)
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")
        xhr.onreadystatechange = function(){
            if (xhr.readyState == 4) {
                if(xhr.status == 200){
                    let dt = JSON.parse(xhr.responseText)
                    console.log('ËØÜÂà´ÊñáÂ≠óÊàêÂäü', dt)
                    let arr = dt.words_result
                    let n = dt.words_result_num
                    if (n) {
                        let s = ''
                        for (let i = 0; i < n; i++) {
                            s += arr[i].words
                        }
                        putText(s)
                    }
                    nextText()
                }else{
                    console.log('ËØÜÂà´ÊñáÂ≠óÂ§±Ë¥•', xhr.responseText)
                    nextText()
                }
            }
        }
        xhr.send('image='+encodeURIComponent(tempBase64))
    }

    //ËØÜÂà´‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊñáÂ≠ó
    const nextText = ()=>{
        if (cIndex < lowestArr.length - 1) {
            cIndex++
            setTimeout(getText, 350)
        } else {
            finish()
        }
    }

    //ÊñáÂ≠óËØÜÂà´ÂÆåÊØï
    const finish = ()=>{
        format()
        cIndex = 0
        d = JSON.parse(copyD)
    }

    //Ê†ºÂºèÂåñhtml
    const format = ()=>{
        let all = result.querySelectorAll('*')
        for(let i=0;i<all.length;i++){
            all[i].removeAttribute('id')
            all[i].removeAttribute('cssT')
        }
        let ssArr = result.innerHTML.replace(/></g,'>\n<').split('\n')
        let curP = 0
        for(let i=1;i<ssArr.length;i++){
            if(ssArr[i-1].indexOf('</')==-1 && ssArr[i-1].indexOf('<input')==-1 && ssArr[i-1].indexOf('<img')==-1){
                curP++
            }
            if(ssArr[i].indexOf('</')==0){
                curP--
            }
            for(let j=0;j<curP;j++){
                ssArr[i] = '    '+ssArr[i]
            }
        }
        let s = ''
        for(let i=0;i<ssArr.length;i++){
            let ln = ssArr[i].length-1
            let t = ''
            if(ssArr[i+1]){
                t = ssArr[i+1].trim()
            }
            if(t.indexOf('</')==0 && ssArr[i].charAt(ln)=='>' && ssArr[i].indexOf('</')==-1 && ssArr[i].indexOf('<input')==-1 && ssArr[i].indexOf('<img')==-1){
                s += ssArr[i]+t+'\n'
                i++
            }else{
                s += ssArr[i]+'\n'
            }
        }
        codeTextArea.value = s
    }

    //‰∏çÂêåÊ†áÁ≠æÂêçÊñáÂ≠óËæìÂÖ•Âà∞Âì™
    const putText = s=>{
        let tag = d[lowestArr[cIndex]][4]
        let a = f('a' + lowestArr[cIndex])
        if (['text', 'pass', 'area'].indexOf(tag) != -1) {
            a.placeholder=s
        } else if (['submit'].indexOf(tag) != -1) {
            a.value=s
        } else {
            a.innerText=s
        }
    }

    //ËÆæÁΩÆÊØè‰∏™Ê°ÜÊ°ÜÁöÑz-index
    const setZIndex = ()=>{
        setParents()
        let ones = document.querySelectorAll('.one')
        for (let i = 0; i < d.length; i++) {
            ones[d[i][6]].style.zIndex=d[i][7].length
        }
    }

    //ÊääÊâãÂÜôÁöÑÁ±ªÂÇ®Â≠òÂà∞dÊï∞ÁªÑÈáå
    const setClass = ()=>{
        let ones = document.querySelectorAll('.one')
        for(let i=0;i<ones.length;i++){
            d[i][5] = d[i][5].replace(/class='.*?'/,"class='"+ones[i].innerText.replace(/\s+/g,' ')+"'")
        }
        copyD = JSON.stringify(d)
    }

    //Â∞ÜÂØπË±°ÊãºÊé•ÊàêcssÂ≠óÁ¨¶‰∏≤
    const obj2css = obj=>{
        let x,s = ''
        for (x in obj){
            if(obj[x]){
                s += x+': '+obj[x]+';'
            }
        }
        return s
    }

    //Â∞ÜÊ°ÜÊ°ÜÊí§ÈîÄ
    const back = ()=>{
        if (d.length) {
            backArr.push(d.pop())
            copyD = JSON.stringify(d)
            let all = rectList.querySelectorAll('.one')
            rectList.removeChild(all[all.length-1])
        }
    }

    //Â∞ÜÊ°ÜÊ°ÜÂèçÊí§ÈîÄ
    const unBack = ()=>{
        if (backArr.length) {
            let u = backArr.pop()
            d.push(u)
            copyD = JSON.stringify(d)
            curEle = document.createElement("div")
            curEle.className = 'one'
            curEle.onclick= function(){editCss(this)}
            rectList.appendChild(curEle)
            setEle(u[0], u[1], u[2], u[3])
            curEle.innertext=u[5].match(/class='(.*?)'/)[1]
            setZIndex()
        }
    }

    //Â∞ÜÊ°ÜÊ°ÜÊí§ÈîÄ(ctrl+Z)ÊàñÂèçÊí§ÈîÄ(ctrl+Y)
    document.onkeydown = e => {
        if (tagS && e.ctrlKey == true && e.keyCode == 90) {
            e.preventDefault()
            e.returnvalue = false
            back()
        }
        if (tagS && e.ctrlKey == true && e.keyCode == 89) {
            e.preventDefault()
            e.returnvalue = false
            unBack()
        }
    }

    //ËÆæËÆ°ÂõæÂä†ËΩΩÂÆåÂêéÊâßË°åÊ≠§ÂáΩÊï∞
    const begin = ()=>{
        cv.width = imgA.width + 20
        cv.height = imgA.height + 70
        ctx.fillStyle='#fff'
        ctx.fillRect(0,0,cv.width,cv.height)
        ctx.drawImage(imgA, 10, 60, imgA.width, imgA.height)
    }

    //ÂÖ≥Èó≠ÊâÄÊúâ
    const closeAll = ()=>{
        rectList.className = ''
        colorPop.className = ''
        opColor.className = ''
        opm.className = ''
        opM.className = ''
        codePop.className = ''
        cssPop.className = ''
        opMshow = false
        tagS = false
        MlineH.className = ''
        MlineV.className = ''
    }

    //Â∞ÜÊµãÈáèÁöÑË∑ùÁ¶ªËÆæ‰∏∫ÂΩìÂâçÁöÑcssÂ±ûÊÄßÂÄº
    const setCssD = cssV=>{
        if(distancePut){
            distancePut = false
            f(drawAttr).value=drawPx?(cssV+'px'):(cssV/100+'rem')
            setCss()
            closeAll()
            rectList.className = 'show'
            cssPop.className = 'show'
            noActive()
            writeCss.className = 'opr active'
        }
    }

    //Â∞ÜÂèñÂà∞ÁöÑÈ¢úËâ≤ËÆæ‰∏∫ÂΩìÂâçÁöÑcssÂ±ûÊÄßÂÄº
    const setCssC = cssV=>{
        if(colorPut){
            colorPut = false
            if(['border','border-top','border-bottom','border-left','border-right'].indexOf(drawAttr)!=-1){
                f(drawAttr).value='1px solid '+cssV
            }else{
                f(drawAttr).value=cssV
            }
            setCss()
            closeAll()
            rectList.className = 'show'
            cssPop.className = 'show'
            noActive()
            writeCss.className = 'opr active'
        }
    }
    //Â∞ÜÂΩìÂâçÂºπÁ™óÁöÑcssÊîæÂà∞ÂΩìÂâçÁöÑÂØπË±°Èáå
    const setCss = ()=>{
        let b = {}
        let list = cssPop.querySelectorAll('.css-t')
        for(let k=0;k<list.length;k++){
            let item = list[k]
            let attr = item.id
            let v = item.value
            if(v){
                b[attr] = v
            }
            if(cssObjV.indexOf(v) !=-1){
                delete b[attr]
            }
            item.parentNode.className = b[attr]?'css-one black':'css-one'
        }
        d[dIndex][8] = JSON.stringify(b)!='{}'?b:''
    }

    //Â∞ÜÈ¢úËâ≤ËΩ¨‰∏∫16ËøõÂà∂ÁöÑ
    const parse16 = c=>{
        let r = c[0]>15?c[0].toString(16):('0'+c[0].toString(16))
        let g = c[1]>15?c[1].toString(16):('0'+c[1].toString(16))
        let b = c[2]>15?c[2].toString(16):('0'+c[2].toString(16))
        if(r.charAt(0)==r.charAt(1) && g.charAt(0)==g.charAt(1) && b.charAt(0)==b.charAt(1)){
            r=r.charAt(0)
            g=g.charAt(0)
            b=b.charAt(0)
        }
        return '#'+r+g+b
    }

    //ËÆæÁΩÆÁ±ªÂêçÂâçÁºÄ
    const preC = t=>{
        preV = t.value
        curV = bar.querySelector('.btn.active').getAttribute('v').replace(preV?'$':'$-',preV)
    }

    //Êü•ÁúãhtmlÂíåcssÔºåËÆ©Ëøô‰∏™ÂºπÁ™óÂ±ÇÁ∫ßÊúÄÈ´òÔºåÊâìÂºÄÊó∂‰∏çË¶ÅÂÖ≥Èó≠ÂÖ∂ÂÆÉ
    const seeCode = () => {
        codePop.className = 'show'
        setClass()
        sortD()
        setParents()
        setMaxLevel()
        createHtml()
        getAllClass()
        setLowestArr()
        if(recognize){
            getText()
        }else{
            finish()
        }
    }

    //Â§çÂà∂html
    const copyCode = ()=>{
        codeTextArea.select()
        document.execCommand('copy')
    }

    //Â§çÂà∂css
    const copyCss = ()=>{
        cssTextArea.select()
        document.execCommand('copy')
    }

    //ÁÇπÂáªTÔºåÁîüÊàêÊó∂ÊòØÂê¶ËØÜÂà´ÊñáÂ≠ó
    const recognizeT = t=>{
        if(recognize){
            t.className = 'opr'
            recognize = false
        }else{
            t.className = 'opr selected'
            recognize = true
        }
    }

    //ÁÇπÂáªClassËøõÂÖ•ÂÜôÁ±ªÁä∂ÊÄÅ
    const inClass = t=>{
        closeAll()
        setZIndex()
        noActive()
        t.className = 'opr active'
        rectList.className = 'show'
    }

    //ÁÇπÂáªcssËøõÂÖ•ÁºñËæëcssÁöÑÁä∂ÊÄÅ
    const inCss = t=>{
        closeAll()
        setZIndex()
        noActive()
        t.className = 'opr active'
        rectList.className = 'show'
    }

    //ÁÇπÂáª‰∏Ä‰∏™Ê°ÜÊ°ÜÊâìÂºÄcssÂºπÁ™óÂºÄÂßãÁºñËæë
    const editCss = t=>{
        if(writeCss.className.indexOf('active')!=-1){
            let all = rectList.querySelectorAll('.one')
            let i = 0
            for(let j=0;j<all.length;j++){
                if(all[j]==t){
                    i=j
                    break
                }
            }
            let b = d[i][8] || {}
            let list = cssPop.querySelectorAll('.css-t')
            for(let k=0;k<list.length;k++){
                let item = list[k]
                let attr = item.id
                item.value=b[attr] || cssObj[attr] || ''
                item.parentNode.className = b[attr]?'css-one black':'css-one'
            }
            cssPop.className = 'show'
            dIndex = i
        }
    }

    //ËøõÂÖ•ÊµãÈáèÊ®°Âºè
    const measure = t=>{
        closeAll()
        noActive()
        t.className = 'opr active'
        opm.className = 'show'
    }

    //ËøõÂÖ•ÊµãÈáèÊ®°Âºè2
    const measure2 = t=>{
        closeAll()
        noActive()
        t.className = 'opr active'
        opM.className = 'show'
        opMshow = true
        MlineH.className = 'show'
        MlineV.className = 'show'
    }

    //ÁÇπÂáªCËøõÂÖ•Â§çÂà∂È¢úËâ≤ÁöÑÁä∂ÊÄÅ
    const inColor = t=>{
        closeAll()
        noActive()
        t.className = 'opr active'
        opColor.className = 'show'
    }

    //Â§çÂà∂color16
    const copy16 = ()=>{
        color16.select()
        document.execCommand('copy')
    }

    //Â§çÂà∂colorRGBA
    const copyRGBA = ()=>{
        colorRGBA.select()
        document.execCommand('copy')
    }

    //ÁÇπÂáªpx
    const px = t=>{
        if(drawPx){
            drawPx = false
            t.className = 'opr'
        }else{
            drawPx = true
            t.className = 'opr selected'
        }
    }

    //ÂàáÊç¢Ê†áÁ≠æÊó∂
    const tagC = t=>{
        closeAll()
        noActive()
        t.className = 'btn active'
        curTag = t.innerText
        curV = t.getAttribute('v').replace(preV?'$':'$-',preV)
        tagS = true
    }

    //ÁÇπÂáªÈ¢úËâ≤Áõ∏ÂÖ≥ÁöÑcssÂ±ûÊÄßÂêç
    const colorP = t=>{
        drawAttr = t.innerText
        noActive()
        cBtn.className = 'opr active'
        cssPop.className = ''
        rectList.className = ''
        opColor.className = 'show'
        colorPut = true
    }

    //ÁÇπÂáªË∑ùÁ¶ªÁõ∏ÂÖ≥ÁöÑcssÂ±ûÊÄßÂêç
    const distanceP = t=>{
        drawAttr = t.innerText
        noActive()
        mBtn.className = 'opr active'
        cssPop.className = ''
        rectList.className = ''
        opm.className = 'show'
        distancePut = true
    }

    //ÊâÄÊúâÊåâÈíÆÂéªÊéâactiveÁ±ª
    const noActive = ()=>{
        let as = bar.children
        for(let i=0;i<as.length;i++){
            as[i].className = as[i].className.replace(' active','')
        }
    }

    //ÂØºÂÖ•ÂõæÁâá
    const imgC = t=>{
        const file = t.files[0]
        const fr = new FileReader()
        fr.onloadend = function(e) {
            imgA.src=e.target.result
            if (imgA.complete) {
                begin()
            } else {
                imgA.onload = begin
            }
            sessionStorage.setItem('img',e.target.result)
        }
        fr.readAsDataURL(file)
    }

    //ÁºìÂ≠òÂ¶ÇÊûúÊúâÂõæÁâá
    if (sessionStorage.getItem('img')){
        imgA.src=sessionStorage.getItem('img')
        if (imgA.complete) {
            begin()
        } else {
            imgA.onload = begin
        }
    }
</script>